<script>
    function fakeNew() {
        var obj = new Object()
        var Constructor = [].shift.call(arguments)
        obj.__proto__ = Constructor.prototype
        var ret = Constructor.apply(obj, arguments)
        return typeof ret === 'object' ? ret : obj
    }

    function run() {
        var Person = function(name) {
            this.name = name
            this.hi = function() {
                return `Hi!${this.name}`
            }
        }
        Person.prototype.age = 23
        Person.prototype.say = function() {
            return `Say,${this.age}`
        }
        Person.prototype.test = () => {
            return `Test-${this.age}`
        }

        var p = fakeNew(Person, 'leo')
        console.log(p.name) // leo
        console.log(p.age) // 23
        console.log(p.hi()) // Hi!leo
        console.log(p.say()) // Say,23
        console.log(p.test()) // Test-undefined
    }

    run()
</script>
