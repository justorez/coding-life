<div class="site">
    <form>
        <fieldset>
            <legend>主题选择：</legend>
            <div>
                <input type="radio" id="light" name="theme" value="light" checked />
                <label for="light">Light</label>

                <input type="radio" id="dark" name="theme" value="dark" />
                <label for="dark">Dark</label>

                <input type="radio" id="invert" name="theme" value="invert" />
                <label for="invert">Invert</label>
            </div>
        </fieldset>
    </form>

    <div class="main">
        <button>一个按钮</button>
    </div>
</div>

<script>
    const themes = ['light', 'dark', 'invert']
    document.querySelectorAll('input[name="theme"]').forEach(radio => {
        radio.onchange = function() {
            if (this.checked) {
                const html = document.documentElement
                html.classList.remove(...themes)
                html.classList.add(this.value)
            }
        }
    })
</script>

<style>
    /* 依赖系统设置：浅色和深色模式切换 */
    @media (prefers-color-scheme: light) {
        :root {
            --mode: 'light';
            --green: #42b883;
            --btn-color: #fff;
            --bg: #fff;
        }
    }
    @media (prefers-color-scheme: dark) {
        :root {
            --mode: 'dark';
            --green: #42b883;
            --btn-color: #213547;
            --bg: #1a1a1a;
        }
    }

    /* 
      手动把当前网页设置为深色模式
      但是无法自定义样式，不会触发上面的媒体查询
    */
    /* html.dark {
        color-scheme: dark;
    } */

    /* 修改根元素的 class，实现可控制的主题切换 */
    .dark {
        --mode: 'dark';
        --green: #42b883;
        --btn-color: #213547;
        --bg: #1a1a1a;
    }

    /* 利用颜色反转实现深色模式 */
    .invert .main {
        filter: invert(1) hue-rotate(180deg);
    }

    .site {
        width: 500px;
        font-size: 16px;
    }
    .main {
        height: 100px;
        margin-top: 20px;
        padding: 20px;
        border: 1px dashed #000;
        border-radius: 5px;
        background-color: var(--bg);
        transition: color 1s, background-color 1s;
    }
    .main button {
        appearance: none;
        padding: 8px 1em;
        border: 1px solid var(--btn-color);
        color: var(--btn-color);
        background-color: var(--green);
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
    }
</style>
